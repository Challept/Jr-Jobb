<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lägg till jobb - JrJobb</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Lägg till Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
    <script>
        // Din Firebase-konfiguration
        const firebaseConfig = {
            apiKey: "AIzaSyBuc6rlm9n68VOonCyxMD2RiCUL4ye6T9w",
            authDomain: "jrjobbeu.firebaseapp.com",
            databaseURL: "https://jrjobbeu-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "jrjobbeu",
            storageBucket: "jrjobbeu.appspot.com",
            messagingSenderId: "1086020139028",
            appId: "1:1086020139028:web:3d8f4dd0a5d7a330b64f01",
            measurementId: "G-4FWXYTXFGF"
        };

        // Initiera Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.getDatabase(app);
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Lägg till ett nytt jobb</h1>
        </header>
        <form id="job-form">
            <label for="task">Uppgift:</label>
            <input type="text" id="task" required>

            <label for="phone">Telefonnummer:</label>
            <input type="tel" id="phone" required>

            <label for="address">Adress:</label>
            <input type="text" id="address" required>

            <label for="price">Pris (kr):</label>
            <input type="number" id="price" required>

            <button type="submit">Lägg till jobb</button>
        </form>

        <script>
            // Vänta på att sidan ska laddas innan du tilldelar event-listeners
            document.addEventListener('DOMContentLoaded', () => {
                const jobForm = document.getElementById('job-form');

                jobForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    const job = {
                        task: document.getElementById('task').value,
                        phone: document.getElementById('phone').value,
                        address: document.getElementById('address').value,
                        price: document.getElementById('price').value
                    };

                    // Spara jobbet i Firebase Realtime Database
                    const dbRef = firebase.database().ref('jobs');
                    dbRef.push(job).then(() => {
                        alert('Jobbet har lagts till!');
                        jobForm.reset();
                    }).catch((error) => {
                        console.error('Error:', error);
                        alert('Något gick fel, försök igen senare.');
                    });
                });
            });
        </script>
    </div>
</body>
</html>
